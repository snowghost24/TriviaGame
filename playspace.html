<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<head>
   <!-- bootstrap link -->
   <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/4.0.2/bootstrap-material-design.css'
   />
   <!-- jquery link -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <!-- css link -->
   <link rel="stylesheet" href="assets/css/style.css">
   <title>Trivia Game</title>
</head>

<body>
   <div id="status"></div>
   <div id="problem">
      <div id="question"></div>
      <div id="answers"></div>
   </div>

   <p id="demo"></p>
   <div class="gif-spot"></div>
   <div class="gif-spot1"></div>


   <!-- javascript link -->
   <script src="assets/javascript/game.js"></script>
   <script>
      // Timer Function
      function countDown(secs, elem) {
            var element = document.querySelector("#status");
            element.innerHTML = secs;
            secs--;
            var timer = setTimeout('countDown(' + secs + ',"' + elem + '")', 1000)
            window.timer = timer;
            if (secs <= -1) {
               clearTimeout(timer);
               console.log(page);

               function onQuestion(received) {
                  countDown(15, "status")
                  var day;
                  switch (received) {
                     case display1.question:
                        displayVals(display2);
                        break;
                     case display2.question:
                        displayVals(display3);
                        break;
                     case display3.question:
                        displayVals(display4);
                        break;
                     case display4.question:
                        displayVals(display5);
                        break;
                     case display5.question:
                        displayVals(display6);
                        break;
                     case display6.question:
                        displayVals(display7);
                        break;
                     case display7.question:
                        displayVals(display8);
                        break;
                     case display8.question:
                        displayVals(display9);
                        break;
                     case display9.question:
                        displayVals(display10);
                        break;
                     case display10.question:
                        displayVals(display1);
                  }
                  //   console.log(day);
               }
               onQuestion(page.question);
            }
         }

      function display(question, rightAnswer, wrongAnswer1, wrongAnswer2, wrongAnswer3,gif) {
         this.question = question;
         this.righAnswer = rightAnswer;
         this.wrongAnswer1 = wrongAnswer1;
         this.wrongAnswer2 = wrongAnswer2;
         this.wrongAnswer3 = wrongAnswer3
         this.gif = gif;
      }

      var display1 = new display("Whos is the only regular season Unanimous MVP?", "Michael Jordan", "Magic Johnson", "Steph Curry", "Lebron James", '<img src="assets/images/curryface.gif" />');
      var display2 = new display("Who has scored the most 3 pointers in NBA history?", "Ray Allen", " Reggie Miller", "Steve Kerr", "Steph Curry", '<img src="assets/images/raygame6.gif" />');
      var display3 = new display("Who holds the record for most 3 pointers in a single NBA game?", "Ray Allen", " Reggie Miller", " Kobe Bryant", "Steph Curry", '<img src="assets/images/stephla.gif" />');
      var display4 = new display("Which player holds the record for most points in an NBA quater?", "Michael Jordan", "Kobe Bryant", " Klay Thompson", "Steph Curry", '<img src="assets/images/klay.gif />');
      var display5 = new display("Which player has never lost in the NBA finals?", "Bill Russell", "Michael Jordan", " Wilt Charmberlain", "Kareem Abdul Jabbar", '<img src="assets/images/mj.gif />');
      var display6 = new display("Which team holds the record for most wins in the regular season?", "Los Angeles Lakers", "Golden State Warriors", "Boston Celtics", "Chicago Bulls",'<img src="assets/images/stephandKlay.gif />');
      var display7 = new display("Who has scored the most points in NBA history?", "Karl Malone", "Kareem Abdul Jabbar", "Michael Jordan", "Lebron James", '<img src="assets/images/kareem.gif />');
      var display8 = new display("Which player has had the most points in an overtime period?", "Penny Hardaway", "Dirk Nowitzki", "Kobe Bryant", "Gilbert Arenas",'<img src="assets/images/arenas.gif />');
      var display9 = new display("Who is the NBA all-time leader in assist?", "Magic Johnson", "Steve Nash", " Rajon Rondo", "John Stockton",'<img src="assets/images/stockton.gif />');
      var display10 = new display("Which player had 4 consecutive 40 point games as a rookie?", "Wilt Chamberlain","Allen Iverson", "Michael Jordan", "Charles Barkley",'<img src="assets/images/stockton.gif />');
      

      $(document).ready(function () {
      //Start of jQuery////////////////////////////////////////////////////////////////////////////
         // Displays question on the screen
         window.displayVals = function (page) {
            $("h4").remove();
            $.each(page, function (key, value) {
               if (key == "question") {
                  $("#question").html("<h3>" + value + "</h3>");
                  // console.log(display1["righAnswer"]);
               } else if(key == "gif"){
   
               }else{
                  $("#answers").append("<h4>" + value + "</h4>");
               }
            });
            checkAnswers(page);
            window.page = page;
         }




         //goes inside pg
         displayVals(display1);
         // starts the counter
         countDown(15, "status");


         function checkAnswers(page) {
               document.addEventListener("click", (e) => {
                  var hitTarget = e.target.innerHTML;
                  if (page == display1 && hitTarget == "Steph Curry") {
                     $(".gif-spot").prepend(display1.gif);
                     setTimeout(function () { nextQuestionRight();
                     displayVals(display2); }, 2600)
                  } else if (page == display1 && hitTarget !== "Steph Curry") {
                     $(".gif-spot").prepend('<img src="assets/images/westbrookface.gif" />');
                     nextQuestionWrong();
                     displayVals(display2);
                     
                  }

                  if (page == display2 && hitTarget == "Ray Allen") {
                     $(".gif-spot1").append('<img src="assets/images/raygame6.gif" />');
                     console.log("You made it again");
                     $("h4").remove();
                    setTimeout(function () {
                        nextQuestionRight();
                        displayVals(display3);
                          $(".gif-spot1").remove('<img src="assets/images/raygame6.gif" />');
                     }, 4000)
                  } else if (page == display2 && hitTarget !== "Ray Allen") {
                     $(".gif-spot").prepend('<img src="assets/images/westbrookface.gif" />');
                     nextQuestionWrong();
                  }


                  if (page == display3 && hitTarget == "Steph Curry") {
                     $(".gif-spot1").append('<img src="assets/images/curryslickmove.gif" />');
                     console.log("You made it again");
                     $("h4").remove();
                     displayVals(display3);
                  } else if (page == display2 && hitTarget !== "Steph Curry") {
                     $(".gif-spot").prepend('<img src="assets/images/westbrookface.gif" />');
                     nextQuestionWrong();
                  }
               })
            };

               // if (page == display2 && hitTarget == "Steph Curry") {
               //    console.log("im insde");
               // $(".gif-spot").prepend('<img src="assets/images/curryslickmove.gif" />');
               //    setTimeout(function () { nextQuestionRight(); }, 2600)
               // } else if (page == display2 && hitTarget !== "Steph Curry") {
               //    $(".gif-spot").prepend('<img src="assets/images/westbrookface.gif" />');
               //    nextQuestionWrong();
               // }




               

               // if (page == display2) {
               //    if (hitTarget == "Steph Curry") {
               //       console.log("You made it again");
               //       $("h4").remove();
               //       displayVals(display3);
               //    }
               // }



              
      
         // console.log(e.target);
         // console.log(hitTarget);
         function nextQuestionRight() {
            clearTimeout(timer);
            countDown(15, "status");
            
            $(".gif-spot").remove();
         }

         function nextQuestionWrong() {
            setTimeout(function () {
               clearTimeout(timer);
               countDown(15, "status");
               displayVals(display2);
               $(".gif-spot").remove();
            }, 3000);
         }

         checkAnswers();
         console.log(display1.question)
    
         // End of jQuery/////////////////////////////////////////////////////////////////////////////////
      })
   </script>

</body>

</html>